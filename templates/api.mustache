import 'package:http/http.dart' as http;
import 'dart:convert';
import 'dart:async';
{{#imports}}
import '{{{.}}}';
{{/imports}}

class {{ className }} {
    {{#endpoints}}
    Future<{{{returnType}}}> {{{methodName}}}(
        {{#allParams}}
        {{{paramType}}} {{{paramName}}},
        {{/allParams}}
    ) async {
        final response = await http.post(
            Uri.parse('{{{url}}}'),
            headers: {
                'Content-Type': 'application/json',
            },
            body: json.encode({
                {{#allParams}}
                '{{{paramName}}}': {{{paramName}}},
                {{/allParams}}
            }),
        );

        if (response.statusCode == 200) {
            return {{{returnType}}}.fromJson(json.decode(response.body));
        } else {
            throw Exception('Failed to load {{methodName}}');
        }
    }
    {{/endpoints}}
}
